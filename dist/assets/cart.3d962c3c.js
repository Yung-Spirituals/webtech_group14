import{j as i}from"./index.ccbec50a.js";import{g as a}from"./authentication.cb496ff9.js";const c=i({id:"cart",state:()=>({carts:[]}),actions:{async addProductToCart(t,e){if(this.findIndexById(t.id)!==-1)await this.updateProductInCart(t.id,t,e);else{const r=await fetch("https://gr14.appdev.cloudns.ph/cart/update-cart/"+t.id+"/"+1,{method:"POST",headers:{Authorization:"Bearer "+a("jwt")}});this.carts=await r.json(),await this.getCart()}},async updateProductInCart(t,e,r){if(!(t===null&&r===null)){if(this.findIndexById(t)!==-1){const s=await fetch("https://gr14.appdev.cloudns.ph/cart/update-cart/"+e.id+"/"+r,{method:"POST",headers:{Authorization:"Bearer "+a("jwt")}});this.carts=await s.json()}}await this.getCart()},async removeProductFromCart(t){await fetch("https://gr14.appdev.cloudns.ph/cart/delete-cart/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+a("jwt")}}),await this.getCart()},findIndexById(t){return this.carts.length<0?this.carts.findIndex(e=>e.id===t):-1},async emptyCart(){this.carts=[],await fetch("https://gr14.appdev.cloudns.ph/cart/empty-cart",{method:"DELETE",headers:{Authorization:"Bearer "+a("jwt")}}),await this.getCart()},async checkOut(){this.carts=[],await fetch("https://gr14.appdev.cloudns.ph/order/new-order",{method:"POST",headers:{Authorization:"Bearer "+a("jwt")}}),await this.getCart()},async getCart(){const t=await fetch("https://gr14.appdev.cloudns.ph/cart/get-cart",{method:"GET",headers:{Authorization:"Bearer "+a("jwt")}});this.carts=await t.json()}},getters:{}});export{c as u};
