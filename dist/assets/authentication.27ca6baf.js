function m(){let t=null;const o=c("current_username"),s=c("current_user_roles");if(o&&s){const n=s.split(",");t={username:o,roles:n}}return t}function h(t,o,s,n){g("POST","https://gr14.appdev.cloudns.ph/authenticate/login",function(e){u("jwt",e.jwt);const i=d(e.jwt);i&&(u("current_username",i.username),u("current_user_roles",i.roles.join(","))),s()},{username:t,password:o},function(e){n(e)})}function p(t){const s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(s).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}function d(t){let o=null;const s=p(t);return s&&(o={username:s.sub,roles:s.roles.map(n=>n.authority)}),o}function w(){console.log("Logging out..."),f()}function f(){a("jwt"),a("current_username"),a("current_user_roles")}function u(t,o,s){const n=new Date;n.setTime(n.getTime()+s*24*60*60*1e3);let r="expires="+n.toUTCString();document.cookie=t+"="+o+";"+r+";path=/"}function a(t){u(t,"",-1)}function c(t){let o=t+"=",n=decodeURIComponent(document.cookie).split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;e.charAt(0)===" ";)e=e.substring(1);if(e.indexOf(o)===0)return e.substring(o.length,e.length)}return""}function g(t,o,s,n,r){const e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE)if(e.status===200){let l="";e.responseText&&(l=JSON.parse(e.responseText)),s(l)}else r?r(e.responseText):console.error("Error in API request")},e.open(t,o);const i=c("jwt");i&&e.setRequestHeader("Authorization","Bearer "+i),n?t.toLowerCase()!=="get"?(e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(n))):(console.error("Trying to send request data with HTTP GET, not allowed!"),e.send()):e.send()}export{m as a,w as d,c as g,h as s};
